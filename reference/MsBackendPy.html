<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A MS data backend for MS data stored in Python — MsBackendPy • SpectriPy</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A MS data backend for MS data stored in Python — MsBackendPy"><meta name="description" content="The MsBackendPy allows to access MS data stored as matchms.Spectrum
objects from the matchms Python
library directly from R. The MS data (peaks data or spectra variables) are
translated on-the-fly when accessed. Thus, the MsBackendPy allows a
seamless integration of Python MS data structures into Spectra::Spectra()
based analysis workflows.
The MsBackendPy object is considered read-only, i.e. it does not provide
functionality to replace the peaks data from R. However, it is possible to
directly change the data in the referenced Python variable."><meta property="og:description" content="The MsBackendPy allows to access MS data stored as matchms.Spectrum
objects from the matchms Python
library directly from R. The MS data (peaks data or spectra variables) are
translated on-the-fly when accessed. Thus, the MsBackendPy allows a
seamless integration of Python MS data structures into Spectra::Spectra()
based analysis workflows.
The MsBackendPy object is considered read-only, i.e. it does not provide
functionality to replace the peaks data from R. However, it is possible to
directly change the data in the referenced Python variable."><meta property="og:image" content="https://rformassspectrometry.github.io/SpectriPy/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SpectriPy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/SpectriPy.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/detailed-installation-configuration.html">Detailed information on installation and configuration</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/SpectriPy/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A MS data backend for MS data stored in Python</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/SpectriPy/blob/main/R/MsBackendPython.R" class="external-link"><code>R/MsBackendPython.R</code></a></small>
      <div class="d-none name"><code>MsBackendPy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>MsBackendPy</code> allows to access MS data stored as <code>matchms.Spectrum</code>
objects from the <a href="https://github.com/matchms/matchms" class="external-link">matchms</a> Python
library directly from R. The MS data (peaks data or spectra variables) are
translated on-the-fly when accessed. Thus, the <code>MsBackendPy</code> allows a
seamless integration of Python MS data structures into <code><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra::Spectra()</a></code>
based analysis workflows.</p>
<p>The <code>MsBackendPy</code> object is considered <em>read-only</em>, i.e. it does not provide
functionality to replace the peaks data from R. However, it is possible to
directly change the data in the referenced Python variable.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  pythonVariableName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  spectraVariableMapping <span class="op">=</span> <span class="fu"><a href="conversion.html">defaultSpectraVariableMapping</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  <span class="va">data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraVariables</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData</a></span><span class="op">(</span><span class="va">object</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraVariables</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/peaksData.html" class="external-link">peaksData</a></span><span class="op">(</span><span class="va">object</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mz"</span>, <span class="st">"intensity"</span><span class="op">)</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">name</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendPy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/spectraVariableMapping.html" class="external-link">spectraVariableMapping</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/spectraVariableMapping.html" class="external-link">spectraVariableMapping</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">reindex</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A <code>MsBackendPy</code> object.</p></dd>


<dt id="arg-pythonvariablename">pythonVariableName<a class="anchor" aria-label="anchor" href="#arg-pythonvariablename"></a></dt>
<dd><p>For <code><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize()</a></code>: <code>character(1)</code> with the
name of the variable/Python attribute that contains the list of
<code>matchms.Spectrum</code> objects with the MS data.</p></dd>


<dt id="arg-spectravariablemapping">spectraVariableMapping<a class="anchor" aria-label="anchor" href="#arg-spectravariablemapping"></a></dt>
<dd><p>For <code><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize()</a></code>: named <code>character</code>
with the mapping between spectra variable names and (<code>matchms.Spectrum</code>)
metadata names. See <code><a href="conversion.html">defaultSpectraVariableMapping()</a></code> for more
information and details.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>For <code><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize()</a></code>: <code>DataFrame</code> with the full MS data
(peaks data and spectra data). Currently not supported.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>MsBackendPy</code> object</p></dd>


<dt id="arg-columns">columns<a class="anchor" aria-label="anchor" href="#arg-columns"></a></dt>
<dd><p>For <code><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData()</a></code>: <code>character</code> with the names of
columns (spectra variables) to retrieve. Defaults to
<code>spectraVariables(object)</code>. For <code><a href="https://rdrr.io/pkg/ProtGenerics/man/peaksData.html" class="external-link">peaksData()</a></code>: <code>character</code> with the
names of the peaks variables to retrieve.</p></dd>


<dt id="arg-drop">drop<a class="anchor" aria-label="anchor" href="#arg-drop"></a></dt>
<dd><p>For <code><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData()</a></code> and <code><a href="https://rdrr.io/pkg/ProtGenerics/man/peaksData.html" class="external-link">peaksData()</a></code>: <code>logical(1)</code> whether,
when a single column is requested, the data should be returned as a
<code>vector</code> instead of a <code>data.frame</code> or <code>matrix</code>.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>For <code>$</code>: <code>character(1)</code> with the name of the variable to
retrieve.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>Replacement value(s).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>MsBackendPy</code> keeps only a reference to the MS data in Python (i.e. the
name of the variable in Python) as well as an index pointing to the
individual spectra in Python but no other data. Any data requested from
the <code>MsBackendPy</code> is accessed and translated on-the-fly from the Python
variable. The <code>MsBackendPy</code> is thus an interface to the MS data, but not
a data container. All changes to the MS data in the Python variable
(performed e.g. in Python) immediately affect any <code>MsBackendPy</code> instances
pointing to this variable.</p>
<p>Special care must be taken if the MS data structure in Python is subset or
its order is changed (e.g. by another process). In that case it might be
needed to re-index the backend using the <code>reindex()</code> function:
<code>object &lt;- reindex(object)</code>. This will update (replace) the index to the
individual spectra in Python which is stored within the backend.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>As mentioned in the <em>details</em> section the MS data is completely stored in
Python and the backend only references to this data through the name of
the variable in Python. Thus, each time MS data is requested from the
backend, it is retrieved in its <strong>current</strong> state.
If for example data was transformed or metadata added or removed in the
Python object, it immediately affects the <code>Spectra</code>/backend.</p>
    </div>
    <div class="section level2">
    <h2 id="msbackendpy-methods"><code>MsBackendPy</code> methods<a class="anchor" aria-label="anchor" href="#msbackendpy-methods"></a></h2>



<p>The <code>MsBackendPy</code> supports all methods defined by the <code><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">Spectra::MsBackend()</a></code>
interface for access to MS data. Details on the invidual functions can also
be found in the main documentation in the <em>Spectra</em> package (i.e. for
<code><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">Spectra::MsBackend()</a></code>). Here we provide information for functions with
specific properties of the backend.</p><ul><li><p><code><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize()</a></code>: initializes the backend with information from the
referenced Python variable (attribute). The name of this attribute,
ideally stored in the associated Python session, is expected to be
provided with the <code>pythonVariableName</code> parameter. The optional
<code>spectraVariableMapping</code> parameter allows to provide additional, or
alternative, mapping of <code>Spectra</code>'s <em>spectra variables</em> to metadata in the
<code>matchms.Spectrum</code> objects. See <code><a href="conversion.html">defaultSpectraVariableMapping()</a></code> (the
default) for more information. The function returns an initialized
instance of <code>MsBackendPy</code>.</p></li>
<li><p><code><a href="https://rdrr.io/pkg/ProtGenerics/man/peaksData.html" class="external-link">peaksData()</a></code>: extracts the peaks data matrices from the backend. Python
code is applied to the data structure in Python to
extract the <em>m/z</em> and intensity values as a list of (numpy) arrays. These
are then translated into an R <code>list</code> of two-column <code>numeric</code> matrices.
Because Python does not allow to name columns of an array, an additional
loop in R is required to set the column names to <code>"mz"</code> and <code>"intensity"</code>.</p></li>
<li><p><code><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData()</a></code>: extracts the spectra data from the backend. Which spectra
variables are translated and retrieved from the Python objects depends on
the backend's <code><a href="https://rdrr.io/pkg/Spectra/man/spectraVariableMapping.html" class="external-link">spectraVariableMapping()</a></code>. All metadata names defined are
retrieved and added to the returned <code>DataFrame</code> (with eventually missing
<em>core</em> spectra variables filled with <code>NA</code>).</p></li>
<li><p><code><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraVariables()</a></code>: retrieves available spectra variables, which include
the names of all metadata attributes in the <code>matchms.Spectrum</code> objects
and the <em>core</em> spectra variables <code><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">Spectra::coreSpectraVariables()</a></code>.</p></li>
<li><p><code>spectraVariableMapping&lt;-</code>: replaces the <code>spectraVariableMapping</code> of the
backend (see <code><a href="conversion.html">setSpectraVariableMapping()</a></code> for details and description
of the expected format).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="additional-helper-and-utility-functions">Additional helper and utility functions<a class="anchor" aria-label="anchor" href="#additional-helper-and-utility-functions"></a></h2>


<ul><li><p><code>reindex()</code>: update the internal <em>index</em> to match <code>1:length(object)</code>.
This function is useful if the original data referenced by the backend was
subset or re-ordered by a different process (or a function in Python).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Rainer and the EuBIC hackathon team</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Loading an example MGF file provided by the SpectriPy package.</span></span></span>
<span class="r-in"><span><span class="co">## As an alternative, the data could also be imported directly in Python</span></span></span>
<span class="r-in"><span><span class="co">## using:</span></span></span>
<span class="r-in"><span><span class="co">## import matchms</span></span></span>
<span class="r-in"><span><span class="co">## from matchms.importing import load_from_mgf</span></span></span>
<span class="r-in"><span><span class="co">## s_p = list(load_from_mgf(r.fl))</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RforMassSpectrometry/Spectra" class="external-link">Spectra</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: S4Vectors</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: stats4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: BiocGenerics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: generics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘generics’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     as.difftime, as.factor, as.ordered, intersect, is.element, setdiff,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     setequal, union</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘BiocGenerics’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     IQR, mad, sd, var, xtabs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     Filter, Find, Map, Position, Reduce, anyDuplicated, aperm, append,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     as.data.frame, basename, cbind, colnames, dirname, do.call,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     duplicated, eval, evalq, get, grep, grepl, is.unsorted, lapply,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     mapply, match, mget, order, paste, pmax, pmax.int, pmin, pmin.int,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     rank, rbind, rownames, sapply, saveRDS, table, tapply, unique,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     unsplit, which.max, which.min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘S4Vectors’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:utils’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     findMatches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     I, expand.grid, unname</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: BiocParallel</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RforMassSpectrometry/MsBackendMgf" class="external-link">MsBackendMgf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mgf"</span>, <span class="st">"test.mgf"</span>, package <span class="op">=</span> <span class="st">"SpectriPy"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="va">fl</span>, source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/MsBackendMgf/man/MsBackendMgf.html" class="external-link">MsBackendMgf</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start data import from 1 files ... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done</span>
<span class="r-in"><span><span class="va">s</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MSn data (Spectra) with 100 spectra in a MsBackendMgf backend:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96          2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97          2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98          2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99          2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 20 more variables/columns.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Translating the MS data to Python and assigning it to a variable</span></span></span>
<span class="r-in"><span><span class="co">## named "s_p" in the (*reticulate*'s) `py` Python environment. Assigning</span></span></span>
<span class="r-in"><span><span class="co">## the variable to the Python environment has performance advantages, as</span></span></span>
<span class="r-in"><span><span class="co">## any Python code applied to the MS data does not require any data</span></span></span>
<span class="r-in"><span><span class="co">## conversions.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_set_attr.html" class="external-link">py_set_attr</a></span><span class="op">(</span><span class="va">py</span>, <span class="st">"s_p"</span>, <span class="fu"><a href="conversion.html">rspec_to_pyspec</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a `MsBackendPy` representing an interface to the data in the</span></span></span>
<span class="r-in"><span><span class="co">## "s_p" variable in Python:</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/backendInitialize.html" class="external-link">backendInitialize</a></span><span class="op">(</span><span class="fu">MsBackendPy</span><span class="op">(</span><span class="op">)</span>, <span class="st">"s_p"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendPy with 100 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data stored in the "s_p" variable in Python</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a Spectra object which this backend:</span></span></span>
<span class="r-in"><span><span class="va">s_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra</a></span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">s_2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MSn data (Spectra) with 100 spectra in a MsBackendPy backend:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data stored in the "s_p" variable in Python</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Available spectra variables: these include, next to the *core* spectra</span></span></span>
<span class="r-in"><span><span class="co">## variables, also the names of all metadata stored in the `matchms.Spectrum`</span></span></span>
<span class="r-in"><span><span class="co">## objects.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraVariables</a></span><span class="op">(</span><span class="va">s_2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "msLevel"                 "rtime"                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "acquisitionNum"          "scanIndex"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "dataStorage"             "dataOrigin"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "centroided"              "smoothed"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "polarity"                "precScanNum"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "precursorMz"             "precursorIntensity"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "precursorCharge"         "collisionEnergy"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "isolationWindowLowerMz"  "isolationWindowTargetMz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "isolationWindowUpperMz" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get the full peaks data:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/peaksData.html" class="external-link">peaksData</a></span><span class="op">(</span><span class="va">s_2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of length 100</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get the peaks from the first spectrum</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/peaksData.html" class="external-link">peaksData</a></span><span class="op">(</span><span class="va">s_2</span><span class="op">)</span><span class="op">[[</span><span class="fl">1L</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            mz  intensity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 213.0546   754969.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 241.0495  1058878.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 259.0601 20211204.0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get the full spectra data:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData</a></span><span class="op">(</span><span class="va">s_2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DataFrame with 100 rows and 17 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       msLevel     rtime acquisitionNum scanIndex dataStorage  dataOrigin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt; &lt;numeric&gt;      &lt;integer&gt; &lt;integer&gt; &lt;character&gt; &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...       ...            ...       ...         ...         ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96          2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97          2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98          2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99          2        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100        NA        NA             NA        NA         s_p          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     centroided  smoothed  polarity precScanNum precursorMz precursorIntensity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;logical&gt; &lt;logical&gt; &lt;integer&gt;   &lt;integer&gt;   &lt;numeric&gt;          &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           NA        NA        NA          NA     259.060                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           NA        NA        NA          NA     837.532                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           NA        NA        NA          NA     250.180                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           NA        NA        NA          NA     250.180                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           NA        NA        NA          NA     250.180                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...       ...       ...         ...         ...                ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96          NA        NA        NA          NA     301.144                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97          NA        NA        NA          NA     407.135                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98          NA        NA        NA          NA     304.192                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99          NA        NA        NA          NA     361.202                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100         NA        NA        NA          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     precursorCharge collisionEnergy isolationWindowLowerMz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;integer&gt;       &lt;numeric&gt;              &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                 1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                 1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                 1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                 1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                 1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...             ...             ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96                1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97                1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98                1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99                1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100               1              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     isolationWindowTargetMz isolationWindowUpperMz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   &lt;numeric&gt;              &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                        NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                        NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                        NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                     ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96                       NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97                       NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98                       NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99                       NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100                      NA                     NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get the m/z values</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">mz</a></span><span class="op">(</span><span class="va">s_2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NumericList of length 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]] 213.0546 241.0495 259.0601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]] 116.0712 116.1074 127.0759 142.1231 ... 398.2568 679.4443 680.4436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]] 232.1689 250.18 251.1831 252.1852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]] 145.0638 187.1102 232.1687 233.1721 250.1795 251.1824 252.1862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]] 232.1689 250.18 251.1831 252.1852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]] 145.0638 187.1102 232.1687 233.1721 250.1795 251.1824 252.1862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]] 232.1689 250.18 251.1831 252.1852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]] 145.0638 187.1102 232.1687 233.1721 250.1795 251.1824 252.1862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]] 135.0432 138.0632 163.0375 195.088</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]] 55.0537 56.0487 58.0281 58.0644 ... 71.0493 72.0792 82.0652 100.0763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;90 more elements&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Plot the first spectrum</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/spectra-plotting.html" class="external-link">plotSpectra</a></span><span class="op">(</span><span class="va">s_2</span><span class="op">[</span><span class="fl">1L</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="MsBackendPy-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Witting, Johannes Rainer, Carolin Huber, Marilyn De Graeve, Wout Bittremieux, Thomas Naake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

